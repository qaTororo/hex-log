# ADR-0001: フレームワーク選定

## ステータス

承認

## コンテキスト

技術ブログ「edge-case」を構築するにあたり、Webフレームワークを選定する必要がある。要件は以下の通り。

- Markdownベースの記事をSSGで静的HTML生成できること
- 将来的にSSR（検索等）にも対応できること
- TypeScriptをファーストクラスでサポートすること
- 本プロジェクトは学習目的を含むため、フレームワークの内部構造を理解できる粒度であること

## 検討した選択肢

### 1. Next.js

React のメタフレームワーク。SSG/SSR/ISRの切り替えが宣言的で、エコシステムが最大。

- **メリット:**
  - 市場シェア最大。情報量が圧倒的に多い
  - App Router + Server Components による最新のレンダリングモデル
  - Vercelとの統合によるゼロコンフィグデプロイ
  - 画像最適化（next/image）、フォント最適化（next/font）などの組み込み機能
- **デメリット:**
  - フレームワークが多くを隠蔽する。SSGの仕組みやルーティングの実装を学びにくい
  - Vercelへの暗黙的なロックイン（他環境でのデプロイは可能だが最適化が効かない）
  - Reactが必須。バンドルサイズのベースラインが大きい
  - 業務で広く使われており、個人プロジェクトとしての学習価値が相対的に低い

### 2. Remix

React ベースのフルスタックフレームワーク。Web標準（fetch, FormData, Response）に寄せた設計思想。

- **メリット:**
  - Web標準APIへの準拠度が高い。学んだ知識がフレームワーク外でも活きる
  - ネストルーティングとローダーパターンによるデータフェッチの整理
  - progressive enhancementの思想が強く、JS無効でも動く
- **デメリット:**
  - SSGのネイティブサポートが弱い。ブログの主要ユースケースであるSSGに対して追加の工夫が必要
  - Reactが必須（Next.jsと同様のバンドルサイズ課題）
  - 2025年時点でReact Routerとの統合が進行中で、プロジェクトの方向性が流動的

### 3. Astro

コンテンツ駆動サイトに特化したフレームワーク。Islands Architectureにより、デフォルトでJavaScriptをゼロ出力。

- **メリット:**
  - ブログ・ドキュメントサイトに最適化されている（Content Collections機能）
  - デフォルトでJSゼロ出力。パフォーマンスが極めて高い
  - React/Vue/Svelte等のUIフレームワークを混在可能
  - Markdown/MDXのファーストクラスサポート
- **デメリット:**
  - コンテンツサイトに特化しすぎており、動的なWebアプリケーションの学習には向かない
  - 独自のテンプレート構文（.astro）を学ぶ必要がある
  - サーバーサイドの仕組み（ルーティング、ミドルウェア等）がフレームワークに隠蔽される

### 4. Hono

Web標準API（fetch, Request, Response）に準拠した軽量フレームワーク。マルチランタイム対応（Cloudflare Workers, Deno, Bun, Node.js）。

- **メリット:**
  - Web標準APIのみで構築。学んだ知識がどのランタイム・プラットフォームでも活きる
  - 極めて軽量（コアが数KB）。フレームワークの全体像を把握できる学習コスト
  - マルチランタイム対応により、Cloudflare Workers/Deno/Bun等の環境を自由に選べる
  - JSX対応（hono/jsx）によるコンポーネント記述が可能
  - ミドルウェアパターンが明快。Express/Koa経験者にも馴染みやすい
  - SSG/SSRの仕組みを自前で実装する必要があるため、内部構造の理解が深まる
- **デメリット:**
  - Next.js/Astro比でエコシステムが小さい。画像最適化等の組み込み機能がない
  - SSGの仕組みを自分で構築する必要がある（ビルドスクリプト、ルーティング等）
  - ブログ構築の先行事例が少なく、手探りになる部分がある
  - 日本発のOSSのため英語圏の情報がNext.jsほど充実していない

## 決定

**Honoを採用する。**

## 結果

- SSG/SSRの切り分け、ルーティング、ビルドパイプラインを自前で実装する。これによりフレームワークが隠蔽する仕組みの理解が深まる
- Web標準APIに準拠するため、学んだ知識がHonoに依存しない汎用的なスキルとなる
- エコシステムの不足はunified/remark/rehype等の汎用ライブラリで補う
- ブログ構築の先行事例が少ないため、構築過程自体がブログ記事のネタになる
- Cloudflare Workers環境との親和性が高いため、デプロイ戦略の選択肢が広がる（→ ADR-0005）
